function drawChart(){var t=20,r=40,e=30,a=40,n=650-a-r,y=350-t-e,o=d3.easeBack,x=d3.select("#chart").append("svg").attr("width",n+a+r).attr("height",y+t+e).append("g").attr("transform","translate("+a+","+t+")"),i=[{x:1965,y:.25},{x:1967,y:.4},{x:1968,y:.32},{x:1970,y:.55},{x:1973,y:.43},{x:1974,y:.45},{x:1975,y:.65},{x:1976,y:.68},{x:1979,y:.99},{x:1980,y:.97},{x:1983,y:1.25},{x:1984,y:1.2},{x:1985,y:1.34},{x:1986,y:1.31},{x:1987,y:1.57},{x:1988,y:1.52},{x:1989,y:1.78},{x:1992,y:1.55},{x:1993,y:1.72},{x:1994,y:2.2},{x:1995,y:1.99},{x:1997,y:2.3},{x:1998,y:2.8},{x:1999,y:3.8},{x:2001,y:3.6},{x:2003,y:3.76},{x:2004,y:3.82},{x:2005,y:3.5},{x:2006,y:3.9},{x:2007,y:4.2},{x:2008,y:4.17},{x:2009,y:4.24},{x:2011,y:4.85},{x:2012,y:5.25},{x:2014,y:5.75},{x:2015,y:6.2},{x:2017,y:6.4},{x:2019,y:6.28},{x:2020,y:6.8}],s=[1970,1979,1986,1994,1999,2005,2012,2019],c=i.filter((t=>s.includes(t.x))),d=d3.scaleLinear().domain([1965,2020]).range([0,n]),l=d3.axisBottom(d).ticks(9).tickFormat(((t,r)=>0!==r?`'${t}`:"")).tickSizeInner(-y);x.append("g").attr("transform","translate(0,"+y+")").call(l);var h=d3.scaleLinear().domain([0,7]).range([y,0]),u=d3.axisLeft(h);u.ticks(9).tickFormat(((t,r)=>0!==r?`$${t}M`:`${t}`)).tickSizeInner(-n),x.append("g").call(u);let f=d3.line().x((t=>d(t[0]))).y((t=>h(t[1]))),p=(x.append("path").attr({d:f(i),class:"lineChart"}),x.append("path").datum(i).attr("fill","none").attr("stroke","#3D35F1").attr("stroke-width",2).attr("d",d3.line().x((function(t){return d(t.x)})).y((function(t){return h(t.y)}))));var g=p.node().getTotalLength();p.attr("stroke-dasharray",g+" "+g).attr("stroke-dashoffset",g).transition().duration(4e3).attr("stroke-dashoffset",0),x.selectAll("w").data(c).enter().append("circle").attr("cx",(function(t){return d(t.x)-500})).attr("cy",(function(t){return h(t.y)-500})).attr("fill","white").attr("stroke","#3D35F1").style("filter","blur(3px)").attr("cy",0).attr("cx",0).attr("r",0).attr("opacity",0).attr("stroke-width",0).transition().ease(o).delay(((t,r)=>120*r+500)).duration(800).ease(o).attr("cx",(function(t){return d(t.x)})).attr("cy",(function(t){return h(t.y)})).attr("r",3.2).attr("stroke-width",2.2).attr("opacity",1).style("filter","none")}const observer=new IntersectionObserver(((t,r)=>{t.forEach((t=>{t.isIntersecting&&(drawChart(),console.log("Drawing a chart..."),console.log(t.threshold),r.unobserve(t.target))}))}),{threshold:.4}),target=document.querySelector("#chart-container");observer.observe(target);