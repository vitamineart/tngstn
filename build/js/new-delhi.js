const gallerySwiper=new Swiper(".gallery",{autoplay:{delay:5e3},spaceBetween:10,breakpoints:{1200:{spaceBetween:100}},slidesPerView:"auto",centeredSlides:!0,loop:!0,slidesPerGroup:1,slidesPerGroupSkip:1,lazy:!0,watchSlidesProgress:!0,keyboard:{enabled:!0}});gsap.from("#van",{scrollTrigger:{trigger:"#van",start:"top 90%"},x:-50,scale:1.1,duration:3,filter:"blur(10px)",ease:"expo.out()"});const game=document.querySelector("#game"),gameHeight=game.getBoundingClientRect(),crushMessage=document.querySelector("#crushMessage"),crushBtn=document.querySelector("#drag-line"),spiceSliderIndex=document.querySelector("#spiceSliderIndex"),spiceSliderName=document.querySelector("#spiceSliderName"),spiceSliderQ=document.querySelector("#spiceSliderQ");let draggedSpices=[];const dropZone=document.querySelector("#StoneBowlContainerDropZone"),cookBtn=document.querySelector("#cook-btn"),cookGaramMasala=document.querySelector("#cook-garam-masala");cookBtn.addEventListener("click",(function(e){cookGaramMasala.classList.remove("closed"),gsap.to(window,{duration:2,scrollTo:{y:cookGaramMasala,offsetY:0},ease:"power2.inOut()"})}));const spiceSwiper=new Swiper("#spiceSlider ",{autoplay:!1,spaceBetween:10,slidesPerView:3,centeredSlides:!0,lazy:!0,watchSlidesProgress:!0,allowTouchMove:!1,simulateTouch:!1,zoom:!0,keyboard:{enabled:!0},spaceBetween:0,on:{init:function(e){spiceSliderIndex.innerHTML=e.slides[e.activeIndex].querySelector("img").dataset.index,spiceSliderName.innerHTML=e.slides[e.activeIndex].dataset.name}}}),spiceImages=document.querySelectorAll("#spiceSlider img"),spiceSliderPrev=document.querySelector(".spiceSliderPrev"),spiceSliderNext=document.querySelector(".spiceSliderNext");function restartGame(){spiceSlider.style.display="block",cookGaramMasala.classList.add("closed"),spiceSliderName.classList.remove("congratulations"),spiceSwiper.init(),spiceSwiper.slideTo(0),spiceSliderName.innerHTML=spiceSwiper.slides[spiceSwiper.activeIndex].dataset.name,spiceSliderIndex.innerHTML=spiceSwiper.slides[spiceSwiper.activeIndex].querySelector("img").dataset.index,draggedSpices=[],dropZone.innerHTML="",crushBtn.innerText="drag to the stone bowl",crushBtn.style.color="#000",crushBtn.style.background="#ffffff99",crushBtn.style.cursor="default",game.classList.remove("end-game"),spiceImages.forEach((e=>{e.draggable=!0}))}function finishCrushing(){game.classList.toggle("end-game"),spiceSliderName.classList.add("congratulations"),spiceSliderName.innerHTML="Congratulations!",spiceSliderIndex.innerHTML=10,crushMessage.style.display="none",crushBtn.innerText="End Game",crushBtn.addEventListener("click",(e=>restartGame(e)),{once:!0})}spiceSliderPrev.addEventListener("click",(e=>{spiceSwiper.slidePrev()})),spiceSliderNext.addEventListener("click",(e=>{spiceSwiper.slideNext()})),spiceSwiper.on("slideChange",(e=>{spiceSliderName.innerHTML=e.slides[e.activeIndex].dataset.name,spiceSliderIndex.innerHTML=e.slides[e.activeIndex].querySelector("img").dataset.index,e.removeSlide[e.activeIndex-1]})),spiceImages.forEach((e=>{e.addEventListener("mouseenter",(e=>{draggedSpices.includes(e.target.id)?(e.target.style.cursor="not-allowed",e.target.draggable=!1,console.log(`You already added ${e.target.id}`)):e.target.style.cursor="pointer"})),e.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",e.target.id);e.dataTransfer.effectAllowed="copy"}))})),dropZone.addEventListener("dragover",(e=>{e.preventDefault()})),dropZone.addEventListener("drop",(e=>{const r=e.dataTransfer.getData("text/plain");if(draggedSpices.includes(r))console.log("You'already added this spice!");else{const s=document.createElement("img");s.src=`../media/new-delhi/ScatteredSpices/scattered${r}.png`,e.target.appendChild(s),draggedSpices.push(r),spiceSwiper.slideNext(),8==draggedSpices.length&&(spiceSlider.style.display="none",crushMessage.style.display="block",spiceSliderName.innerHTML="",spiceSliderIndex.innerHTML=9,crushBtn.innerText="Click to crush the spices",crushBtn.style.background="#fff",crushBtn.style.color="#000",crushBtn.style.cursor="pointer",crushBtn.addEventListener("click",(e=>finishCrushing(e)),{once:!0}))}}));